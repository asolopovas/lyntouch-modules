<script>
    window.swiperSettings = {
        el: '.{{ block.id }}',
        {#breakpoint: {{ fields.breakpoint  ? fields.breakpoint : 768 }},#}
        active: false,
        config: {
            loop: true,
            slidesPerView: {{ fields.slides_per_view }},
            spaceBetween: 1,
            // Navigation arrows
            navigation: {
                nextEl: '.swiper-right',
                prevEl: '.swiper-left',
            },
        },
    }

    {% if fields.start_breakpoint %}
        if ( {{ fields.start_breakpoint }} <= window.innerWidth  ) {
            window.swiperBlock = new Swiper(window.swiperSettings.el, window.swiperSettings.config)
            window.swiperSettings.active = true
        }
    {% else %}
        window.swiperBlock = new Swiper(window.swiperSettings.el, window.swiperSettings.config)
        window.swiperSettings.active = true
    {% endif %}

    addEventListener('resize', debounce(() => {
        if (window.innerWidth <= window.swiperSettings.breakpoint && window.swiperSettings.active === true) {
            window.swiperBlock.destroy(true, true)
            window.swiperSettings.active = false
        }
        if (window.innerWidth > window.swiperSettings.breakpoint && window.swiperSettings.active === false) {
            window.swiperBlock = new Swiper(window.swiperSettings.el, window.swiperSettings.config)
            window.swiperSettings.active = true
        }
    }, 300))
</script>
